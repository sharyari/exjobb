\newpage
\section{Proposal}

\subsection{Channel System}
A channel system CS over a set of processes P and channels Ch is a tuple $\langle$S,$s_0$,A,C,M,$\delta$$\rangle$, where
\begin{itemize}
\item[]
S is a finite set of control states,
\item[]
$s_0$ is an initial control state,
\item[]
A is a finite set of actions,
\item[]
Ch is a finite set of channels,
\item[]
M is a finite set of messages,
\item[]
$\delta$ is a finite set of transitions, each of which is a triple of the form $\langle s_1,op,s_2\rangle$, where $s_1$ and $s_2$ are control states, and op is a label of one of the forms

\begin{itemize}
\item
c!m, where c $\in$ Ch and m $\in$ M
\item
c?m, where c $\in$ Ch and m $\in$ M
\item
a $\in$ A.
\end{itemize}
\end{itemize}

The finite-state control part of CS is an ordinary labeled transition system with states S, initial state $s_0$ and transitions $\delta$. The channel part is represented by the set Ch of channels, which may contain a string of messages in M. The set A denotes the set of observable interactions with the environment, whereas $\delta$ may either perform an action from A, or and unobservable action, where

\begin{itemize}
\item[]
$\langle s_1, c!m, s_2\rangle$ represents a change of state from $s_1$ to $s_2$ while appending the message m to the tail of channel c
\item[]
$\langle s_1, c?m, s_2\rangle$ represents a change of state from $s_1$ to $s_2$ while removing the message m to the head of channel c
\end{itemize}

\subsection{Channel transition system}
The operational behaviour of CS is defined by the inifinite-state transition system TS = (C, $\rightarrow$) where
\begin{itemize}
\item[]
   C = (S $\times$ $\xi$) is the set of its configurations, where $\xi$ is an evaluation of the set of channels C in CS
\item[]
  $\rightarrow$ $\subseteq (S \times S)$ contains the following transitions
  \begin{itemize}
    \item
      For each observable action a $\in$ A in CS
      \[
      \dfrac{s \xrightarrow{a} s'}{(S, \xi) \rightarrow (S', \xi)}
      \]
    \item
      For each transmission action $\langle s_1, ch!m, s_2 \rangle$ in CS
      \[
      \dfrac{s \xrightarrow{ch!m} s' \wedge ch \in \xi}{(S, \xi) \rightarrow (S', \xi')} \] with \[ \xi' = \xi[ch := \xi (ch) \centerdot m].
      \]
    \item
      For each reception action $\langle s_1, ch?m, s_2 \rangle$ in CS
      \[
      \dfrac{s \xrightarrow{ch?m} s' \wedge ch \in \xi}{(S, m \centerdot \xi) \rightarrow (S', \xi')} \] with \[ \xi' = \xi[ch:= \xi (ch)].
      \]

  \end{itemize}
\end{itemize}

Let c denote a configuration, the c is said to be reachable in TS, if there are configurations $c_1...c_l$ such that $c_0$ is an initial conifuration of TS, $c_l = k$ and for each 0 $\leq$ i < l, $\langle c_i, c_{i+1} \rangle \in \rightarrow$. At times we may use a notation for a configuration c with explicit processes and channels, so that c = $\conf{s_1,...,s_n, ch_1,...,ch_p}$, or alternatively, with explicit processes and channel evaluations, c = $\conf{s_1,...,s_n, \xi(ch_1),...,\xi(ch_p)}$.

\emph{Example.} Let $c = \conf{S,\xi}$ be a configuration with two processes and two channels containing the words \e{ab} and \e{lf} respectively. Then c may also be denoted as $c = \conf{s_1,s_2, ch_1, ch_2}$ or as $c = \conf{s_1,s_2,ab,lf}$. 

\newpage

\subsection{Subwords and views}

Let $\subword$ be the subword relation, then u $\subword$ $s_1...s_n$=w iff u=$s_{i_1}...s_{i_k}$ where 1 $\leq$ $i_1,i_k$ $\leq $ n and $i_j < i_{j+1}$ for all 1 $leq$ j < k. For example, if w=abc, then the set of subwords of w is {abc, ab, bc, a, b, c}.

We define the subword relation $\subword$ for configurations, such that for c = $\conf{s,\xi}$, c'=$\conf{s,\xi[ ch \subword \xi(ch)] | ch \in \xi}$. 

\emph {Example.} Suppose \e{c} is a configuration $\conf{s_1,s_2,ab,cd}$. Then the subwords of \e{c} is the set
\begin{ttabular}
$\conf{s_1,s_2,ab,cd}$ \\
$\conf{s_1,s_2,a,cd}$ &
$\conf{s_1,s_2,b,cd}$ &
$\conf{s_1,s_2,\epsilon,cd}$ \\ 
$\conf{s_1,s_2,a,c}$ &
$\conf{s_1,s_2,b,c}$ &
$\conf{s_1,s_2,\epsilon,c}$ \\
$\conf{s_1,s_2,a,d}$ &
$\conf{s_1,s_2,b,d}$ &
$\conf{s_1,s_2,\epsilon,d}$ \\
$\conf{s_1,s_2,\epsilon,\epsilon}$ \\
\end{ttabular}


\subsection{View abstraction}
The abstraction function $\alpha_k: C\rightarrow 2^{C_k}$\todo{?} maps a configuration c into the set V of \emph{views} of size up to \emph{k} \todo{define size}, such that for each v $\in$ V, $\{v\sqsubseteq c\}$. 

The concretization function $\gamma_k: 2^{C_k} \rightarrow 2^C$\todo{?} returns, given a set of views V, the set of configurations that can be reconstructed from the views in V, in other words, $\gamma_c(V) = \{c \in C | \alpha_k(c) \subseteq V$\}

The abstract post-image of a set of view V $\in$ $C_k$ is defined as $Apost_k$(V) = $\alpha_k(post(\gamma_k(V)))$ In general, $\gamma_k$ is an infinite set of states. We hope \todo{!} we only need to consider those configurations, whose sizes are up to k+1, i.e. a finite set of configurations. We define $\gamma_k^l$ := $\gamma_k(V) \cap C_l$ for some $l\geq 0$.

\subsection{Example}
Consider the configuration k = ($s_1$, $r_1$, ab, ba) for the alternating bit protocol (defined elsewhere), then $\alpha_2(k)$ = \{($s_1$, $r_1$, ab, ba), ($s_1$, $r_1$, ab, a), ($s_1$, $r_1$, ab, b), ($s_1$, $r_1$, b, ba), ($s_1$, $r_1$, a, ba), ($s_1$, $r_1$, ab, $\epsilon$), ($s_1$, $r_1$, $\epsilon$, ba)\} = V. Then $\gamma(V)$ = V.

The post of the set V contains
\begin{itemize}
\item
($s_1$, $r_1$, ab, ba) $\rightarrow$ ($s_2$, $r_1$, ab, ba), since ($s_1$$\rightarrow$$s_2$) $\in$ A.
\item
($s_1$, $r_1$, ab, a) $\rightarrow$ ($s_2$, $r_1$, ab, a), since ($s_1$$\rightarrow$$s_2$) $\in$ A.
\item
($s_1$, $r_1$, ab, a) $\rightarrow$ ($s_1$, $r_2$, ab, $\epsilon$), since $\langle$$r_1$,$c_2?m$,$r_2$$\rangle$ $\in$ $\delta$.
\item
and so on.


\subsection{Proof}
First we note, that for any configuration \e{c} $\in$ \e{V}, any view \e{v'} $\in$ $\alpha_k(c)$ is also a valid configuration in \e{V}, since $\alpha_k(v')$ $\subseteq$ $\alpha_k(c)$ and thus \e{v'} $\in$ $\gamma_k^(k+1)(\alpha_k(c))$. Also note that if from \e{c} a transition \e{r} can be fired, then this transition can also be fired from any configuration \e{c'} = \e{v'}, as transmission rules are guarded only by the states of the channel system and not by channel evaluations.

We will show that for any configuration \e{c} $in$ $\gamma_k(V)$ of size $m > k + 1$ such that there is a transition \e{c} $\rightarrow$ \e{c'} induced by a transmission rule \e{r} $\in$ $\rightarrow$, then for each \e{v'} $\in$ $\alpha_k(c')$, the following holds: Either \e{v'} $\in$ \e{V} or there is a configuration \e{d} $\in$ $\gamma_k(V)$ of size at most \e{k+1} with a transition \e{d} $\rightarrow$ \e{d'} induced by \e{r} with \e{v'} $\in$ $\alpha_k(d')$.

A transmission rule changes the evaluation of at most one channel \e{ch} $\in$ \e{c}, and (possibly) the state of the channel system, thus we need only reason about the words of \e{ch}.
Let \e{c} = $\conf{S, w_1..w_m}$ $\rightarrow{ch!w_{m+1}}$ \e{c'} $\conf{S', w_1..w_mw_{m+1}}$. Any view \e{v'} of size at most \e{k} of \e{c'} is of the form $\conf{S',w_{i_1}..w_{i_l}}$ for $l \leq k$, with $\{i_1...i_l\}$ $\subseteq$ \{1...(m+1)\}.

If in \e{v'} $w_{i_l}$ = $w_{m+1}$, i.e. the transmitted message is in the view, then there is a configuration \e{d} = $\conf{S, w_{i_0}w_{i_1}...w_{i(l-1)}}$ $\in$ $\gamma_k{V}$ from which the transition rule r can be fired, creating the configuration \e{d'} = $\conf{S', w_{i_0}w_{i_1}..w_{i_l}}$ of size at most \e{k+1}, and \e{v'} $\in$ $\alpha_k(d')$ (created from \e{d'} by dropping the first symbol of the channel).

If $\in$ \e{v'} $w_{i_l}$ $\neq$ $w_{m+1}$, i.e. the transmitted message is not in the view, then there is a configuration \e{d} = $\conf{S, w_{i_1}..w_{i_l}}$ from which the transisition \e{r} can be fired, creating the configuration \e{d'} = $\conf{S, w_{i_1}..w_{i_l}w_{m+1}}$ for which \e{v'} $\in$ $\alpha_k(d')$ (created by dropping the last symbol from the channel).


\e{Example}. Assume a system with two processes and a single channel. Let \e{c} = $\conf{1,2,abc}$ $\rightarrow{ch!d}$ $\conf{2,2,abcd}$. Assume that $\e{c}$ $\in$ $\gamma_2(V)$, then $\alpha_2(c)$ $\in$ \e{V}, i.e. 
$\conf{1,2,a}$, $\conf{1,2,b}$, $\conf{1,2,c}$,$\conf{1,2,ab}$,$\conf{1,2,bc}$ are in in V and also in $\gamma_k(V)$.

$\alpha_2(c')$ = \{$\conf{2,2,a}$, $\conf{2,2,b}$, $\conf{2,2,c}$,$\conf{2,2,d}$,$\conf{2,2,ab}$,$\conf{2,2,bc}$,$\conf{2,2,cd}$ \}. Consider a view with the newly transmitted message, $\conf{2,2,cd}$, it can by created by $\conf{1,2,bc}$ $\rightarrow{ch!d}$ $\conf{2,2,bcd}$, for which $\conf{2,2,cd}$ is a view. Considering a view without the transmitted message, $\conf{2,2,ab}$, it can be created by 
$\conf{1,2,ab}$ $\rightarrow$ $\conf{1,2,abd}$ for which it is a view.

\end{itemize}
